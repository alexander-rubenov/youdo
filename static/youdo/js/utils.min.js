"use strict";!function(){function e(e){return 204===e.status?{}:e.json()}function t(e){return e.status>=200&&e.status<300?Promise.resolve(e):Promise.reject(e)}window.urls={makeOrder:"/order/"},window.utils={csrfToken:document.getElementById("csrfToken").dataset.csrf,isUserAuthenticated:Boolean(document.getElementById("is_authenticated")),setStatus:function(e){return e.status>=200&&e.status<300?Promise.resolve(e):Promise.reject(e)},getCookie:function(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0},setCookie:function(e,t,n){var o=(n=n||{}).expires;if("number"==typeof o&&o){var i=new Date;i.setTime(i.getTime()+1e3*o),o=n.expires=i}o&&o.toUTCString&&(n.expires=o.toUTCString());var r=e+"="+(t=encodeURIComponent(t));for(var a in n){r+="; "+a;var s=n[a];!0!==s&&(r+="="+s)}document.cookie=r+"; path=/;"},removeCookie:function(e){document.cookie="".concat(e,"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;")},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},getParentBlock:function(e,t,n){for(var o=e.target;o!==t;){if(o.classList.contains(n))return o;o=o.parentNode}},collectFormData:function(e){var t=e.querySelectorAll("input"),n=new FormData;return t.forEach(function(e){n.append(e.name,e.value)}),n.append("csrfmiddlewaretoken",this.csrfToken),n},makeFetch:function(n,o){return fetch(n,o).then(t).then(e).then(function(e){return e}).catch(function(e){throw new Error(e)})},makeRequest:function(e,t){var n=this,o=e.url,i=e.method,r=e.body,a=void 0===r?null:r,s=new XMLHttpRequest,c=document.querySelector('*[data-disabled="disabled"]');s.onreadystatechange=function(){if(4===s.readyState&&200===s.status){var e=JSON.parse(s.responseText);t(e)}(4===s.readyState&&500===s.status||405===s.status)&&window.notifications.showNotification("error","Произошла ошибка сервера. Попробуйте позже."),4===s.readyState&&403===s.status&&window.notifications.showNotification("error","Произошла ошибка доступа. Перезапустите сайт."),n.enableSubmitButton(c)},s.open(i,o,!0),s.send(a)},setCustomVariableValue:function(e,t){document.documentElement.style.setProperty(e,t)},downloadFile:function(e){var t=document.createElement("a");t.style.display="none",t.setAttribute("href",e),t.setAttribute("download","pdf"),t.setAttribute("target","_blank"),document.body.appendChild(t),t.click(),document.body.removeChild(t)},parseErrors:function(e){Object.keys(e).forEach(function(t){var n=document.querySelector("*[type='".concat(t,"']")),o=n.parentElement;n.nextElementSibling.innerText=e[t][0].message,o.classList.add("user-account__label--error")})},isScrolledIntoView:function(e){if(0===e.left)return null;var t=window.pageYOffset+e.getBoundingClientRect().top,n=(window.pageXOffset,e.getBoundingClientRect().left,window.pageXOffset,e.getBoundingClientRect().right,window.pageYOffset+e.getBoundingClientRect().bottom),o=window.pageYOffset,i=(window.pageXOffset,window.pageXOffset,document.documentElement.clientWidth,window.pageYOffset+document.documentElement.clientHeight);return n>o&&t+.5*e.clientHeight<i},disableSubmitButton:function(e){e.setAttribute("disabled","disabled"),e.setAttribute("data-disabled","disabled"),e.innerHTML+='<svg class="btn__loader" viewBox="25 25 50 50" aria-hidden="true"><circle <svg class="btn__loader-circle" cx="50" cy="50" r="20"></circle></svg>'},enableSubmitButton:function(e){null!==e&&e.hasAttribute("disabled")&&(e.removeAttribute("disabled"),e.removeAttribute("data-disabled"),e.removeChild(document.querySelector(".btn__loader")))}}}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInV0aWxzLmpzIl0sIm5hbWVzIjpbImpzb24iLCJyZXNwb25zZSIsInN0YXR1cyIsInNldFN0YXR1cyIsIlByb21pc2UiLCJyZXNvbHZlIiwid2luZG93IiwidXJscyIsIm1ha2VPcmRlciIsInV0aWxzIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImRhdGFzZXQiLCJjc3JmIiwiY3NyZlRva2VuIiwicmVqZWN0IiwiZ2V0Q29va2llIiwibWF0Y2hlcyIsImRlY29kZVVSSUNvbXBvbmVudCIsImNvb2tpZSIsIm1hdGNoIiwiUmVnRXhwIiwic2V0Q29va2llIiwibmFtZSIsInJlcGxhY2UiLCJ1bmRlZmluZWQiLCJkIiwic2V0VGltZSIsImdldFRpbWUiLCJ2YWx1ZSIsImV4cGlyZXMiLCJvcHRpb25zIiwidG9VVENTdHJpbmciLCJEYXRlIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwicHJvcE5hbWUiLCJ1cGRhdGVkQ29va2llIiwicHJvcFZhbHVlIiwicmVtb3ZlQ29va2llIiwiaXNOYU4iLCJwYXJzZUZsb2F0IiwiaXNGaW5pdGUiLCJ0YXJnZXQiLCJjb25jYXQiLCJpc051bWVyaWMiLCJuIiwiZ2V0UGFyZW50QmxvY2siLCJldnQiLCJsaW1pdGVyQmxvY2siLCJ0YXJnZXRDbGFzc05hbWUiLCJmaWVsZHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9ybURhdGEiLCJjbGFzc0xpc3QiLCJGb3JtRGF0YSIsImZvckVhY2giLCJhcHBlbmQiLCJwYXJlbnROb2RlIiwiY29sbGVjdEZvcm1EYXRhIiwidXJsIiwiZmV0Y2hEYXRhIiwiY2F0Y2giLCJlcnJvciIsImZpZWxkIiwidGhpcyIsIm1ldGhvZCIsIm1ha2VGZXRjaCIsIlhNTEh0dHBSZXF1ZXN0IiwiY3VycmVudFN1Ym1pdEJ1dHRvbiIsInRoZW4iLCJodHRwIiwib25yZWFkeXN0YXRlY2hhbmdlIiwicGFyc2VkUmVzcG9uc2UiLCJFcnJvciIsIm1ha2VSZXF1ZXN0IiwiX3JlZiIsImhhbmRsZXIiLCJfdGhpcyIsIl9yZWYkYm9keSIsImJvZHkiLCJyZWFkeVN0YXRlIiwic2hvd05vdGlmaWNhdGlvbiIsImVuYWJsZVN1Ym1pdEJ1dHRvbiIsIkpTT04iLCJwYXJzZSIsInJlc3BvbnNlVGV4dCIsInNldEN1c3RvbVZhcmlhYmxlVmFsdWUiLCJkb3dubG9hZEZpbGUiLCJmaWxlUGF0aCIsImVsZW1lbnQiLCJub3RpZmljYXRpb25zIiwiY3JlYXRlRWxlbWVudCIsImNsaWNrIiwiT2JqZWN0IiwibmV3UHJvcGVydHlWYWx1ZSIsImludmFsaWRGaWVsZCIsInF1ZXJ5U2VsZWN0b3IiLCJwcm9wZXJ0eU5hbWUiLCJlcnJvckJsb2NrIiwiaW5uZXJUZXh0IiwiZmllbGRMYWJlbCIsImFkZCIsInN0eWxlIiwiZGlzcGxheSIsImlzU2Nyb2xsZWRJbnRvVmlldyIsInRhcmdldFBvc2l0aW9uIiwibGVmdCIsImFwcGVuZENoaWxkIiwiYm90dG9tIiwid2luZG93UG9zaXRpb24iLCJyaWdodCIsInBhZ2VZT2Zmc2V0IiwicGFyZW50RWxlbWVudCIsImVycm9ycyIsIm1lc3NhZ2UiLCJidXR0b24iLCJzZXRBdHRyaWJ1dGUiLCJpbm5lckhUTUwiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJ0b3AiLCJwYWdlWE9mZnNldCIsImhhc0F0dHJpYnV0ZSIsInJlbW92ZUF0dHJpYnV0ZSIsImRvY3VtZW50RWxlbWVudCIsImNsaWVudFdpZHRoIiwiY2xpZW50SGVpZ2h0IiwiZGlzYWJsZVN1Ym1pdEJ1dHRvbiIsInJlbW92ZUNoaWxkIl0sIm1hcHBpbmdzIjoiY0FBQSxXQUNFLFNBQVNBLEVBQUtDLEdBRGYsT0FBWSxNQUFaQSxFQUFZQyxPQUNGRixHQUdOQyxFQUFBRCxPQUdGLFNBQUFHLEVBQUFGLEdBR0MsT0FBSUEsRUFBU0MsUUFBVSxLQUFPRCxFQUFTQyxPQUFTLElBRHpDQyxRQUFVRixRQUFuQkEsR0FFV0csUUFBUUMsT0FBUkosR0FJVkssT0FBQUMsS0FBQSxDQUdDQyxVQUFXLFdBRENGLE9BQWRHLE1BQUEsQ0FJ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Q3BCQSxFQUFPQyxhQUFhLFdBQVksWUFDaENELEVBQU9DLGFBQWEsZ0JBQWlCLFlBQ3JDRCxFQUFPRSxXQUFQLG9KQUdGbkMsbUJBQW9CLFNBQUNpQyxHQUNKLE9BQVhBLEdBRUFBLEVBQU9NLGFBQWEsY0FDdEJOLEVBQU9PLGdCQUFnQixZQUN2QlAsRUFBT08sZ0JBQWdCLGlCQUN2QlAsRUFBT1ksWUFBWXJILFNBQVNzRixjQUFjLG9CQWpObEQiLCJmaWxlIjoidXRpbHMubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24ganNvbihyZXNwb25zZSkge1xuICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDIwNCkge1xuICAgICAgcmV0dXJuIHt9O1xuICAgIH1cblxuICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XG4gIH1cblxuICBmdW5jdGlvbiBzZXRTdGF0dXMocmVzcG9uc2UpIHtcbiAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID49IDIwMCAmJiByZXNwb25zZS5zdGF0dXMgPCAzMDApIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzcG9uc2UpXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChyZXNwb25zZSlcbiAgICB9XG4gIH1cblxuICB3aW5kb3cudXJscyA9IHtcbiAgICBtYWtlT3JkZXI6ICcvb3JkZXIvJyxcbiAgfTtcblxuICB3aW5kb3cudXRpbHMgPSB7XG4gICAgY3NyZlRva2VuOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY3NyZlRva2VuJykuZGF0YXNldC5jc3JmLFxuICAgIGlzVXNlckF1dGhlbnRpY2F0ZWQ6IEJvb2xlYW4oZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2lzX2F1dGhlbnRpY2F0ZWQnKSksXG5cblxuICAgIHNldFN0YXR1czogZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID49IDIwMCAmJiByZXNwb25zZS5zdGF0dXMgPCAzMDApIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShyZXNwb25zZSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChyZXNwb25zZSlcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgZ2V0Q29va2llOiBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgY29uc3QgbWF0Y2hlcyA9IGRvY3VtZW50LmNvb2tpZS5tYXRjaChuZXcgUmVnRXhwKFxuICAgICAgICBcIig/Ol58OyApXCIgKyBuYW1lLnJlcGxhY2UoLyhbXFwuJD8qfHt9XFwoXFwpXFxbXFxdXFxcXFxcL1xcK15dKS9nLCAnXFxcXCQxJykgKyBcIj0oW147XSopXCJcbiAgICAgICkpO1xuXG4gICAgICByZXR1cm4gbWF0Y2hlcyA/IGRlY29kZVVSSUNvbXBvbmVudChtYXRjaGVzWzFdKSA6IHVuZGVmaW5lZDtcbiAgICB9LFxuXG4gICAgc2V0Q29va2llOiBmdW5jdGlvbiAobmFtZSwgdmFsdWUsIG9wdGlvbnMpIHtcbiAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXG4gICAgICBsZXQgZXhwaXJlcyA9IG9wdGlvbnMuZXhwaXJlcztcblxuICAgICAgaWYgKHR5cGVvZiBleHBpcmVzID09IFwibnVtYmVyXCIgJiYgZXhwaXJlcykge1xuICAgICAgICBjb25zdCBkID0gbmV3IERhdGUoKTtcbiAgICAgICAgZC5zZXRUaW1lKGQuZ2V0VGltZSgpICsgZXhwaXJlcyAqIDEwMDApO1xuICAgICAgICBleHBpcmVzID0gb3B0aW9ucy5leHBpcmVzID0gZDtcbiAgICAgIH1cbiAgICAgIGlmIChleHBpcmVzICYmIGV4cGlyZXMudG9VVENTdHJpbmcpIHtcbiAgICAgICAgb3B0aW9ucy5leHBpcmVzID0gZXhwaXJlcy50b1VUQ1N0cmluZygpO1xuICAgICAgfVxuXG4gICAgICB2YWx1ZSA9IGVuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSk7XG5cbiAgICAgIGxldCB1cGRhdGVkQ29va2llID0gbmFtZSArIFwiPVwiICsgdmFsdWU7XG5cbiAgICAgIGZvciAoY29uc3QgcHJvcE5hbWUgaW4gb3B0aW9ucykge1xuICAgICAgICB1cGRhdGVkQ29va2llICs9IFwiOyBcIiArIHByb3BOYW1lO1xuICAgICAgICBjb25zdCBwcm9wVmFsdWUgPSBvcHRpb25zW3Byb3BOYW1lXTtcbiAgICAgICAgaWYgKHByb3BWYWx1ZSAhPT0gdHJ1ZSkge1xuICAgICAgICAgIHVwZGF0ZWRDb29raWUgKz0gXCI9XCIgKyBwcm9wVmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZG9jdW1lbnQuY29va2llID0gdXBkYXRlZENvb2tpZSArICc7IHBhdGg9LzsnO1xuICAgIH0sXG5cbiAgICByZW1vdmVDb29raWU6IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICBkb2N1bWVudC5jb29raWUgPSBgJHtuYW1lfT07IGV4cGlyZXM9VGh1LCAwMSBKYW4gMTk3MCAwMDowMDowMCBVVEM7IHBhdGg9LztgO1xuICAgIH0sXG5cbiAgICBpc051bWVyaWM6IGZ1bmN0aW9uIChuKSB7XG4gICAgICByZXR1cm4gIWlzTmFOKHBhcnNlRmxvYXQobikpICYmIGlzRmluaXRlKG4pXG4gICAgfSxcblxuICAgIGdldFBhcmVudEJsb2NrOiBmdW5jdGlvbiAoZXZ0LCBsaW1pdGVyQmxvY2ssIHRhcmdldENsYXNzTmFtZSkge1xuICAgICAgbGV0IHRhcmdldCA9IGV2dC50YXJnZXQ7XG5cbiAgICAgIHdoaWxlICh0YXJnZXQgIT09IGxpbWl0ZXJCbG9jaykge1xuICAgICAgICBpZiAodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyh0YXJnZXRDbGFzc05hbWUpKSB7XG4gICAgICAgICAgcmV0dXJuIHRhcmdldDtcbiAgICAgICAgfVxuXG4gICAgICAgIHRhcmdldCA9IHRhcmdldC5wYXJlbnROb2RlO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBjb2xsZWN0Rm9ybURhdGE6IGZ1bmN0aW9uIChmb3JtKSB7XG4gICAgICBjb25zdCBmaWVsZHMgPSBmb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0Jyk7XG4gICAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xuXG4gICAgICBmaWVsZHMuZm9yRWFjaChmaWVsZCA9PiB7XG4gICAgICAgIGZvcm1EYXRhLmFwcGVuZChmaWVsZC5uYW1lLCBmaWVsZC52YWx1ZSlcbiAgICAgIH0pO1xuXG4gICAgICBmb3JtRGF0YS5hcHBlbmQoJ2NzcmZtaWRkbGV3YXJldG9rZW4nLCB0aGlzLmNzcmZUb2tlbik7XG5cbiAgICAgIHJldHVybiBmb3JtRGF0YTtcbiAgICB9LFxuXG4gICAgbWFrZUZldGNoOiBmdW5jdGlvbiAodXJsLCBmZXRjaERhdGEpIHtcbiAgICAgIHJldHVybiBmZXRjaCh1cmwsIGZldGNoRGF0YSlcbiAgICAgICAgLnRoZW4oc2V0U3RhdHVzKVxuICAgICAgICAudGhlbihqc29uKVxuICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7XG4gICAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yKTtcbiAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIG1ha2VSZXF1ZXN0OiBmdW5jdGlvbiAoe3VybCwgbWV0aG9kLCBib2R5ID0gbnVsbH0sIGhhbmRsZXIpIHtcbiAgICAgIGNvbnN0IGh0dHAgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgIGNvbnN0IGN1cnJlbnRTdWJtaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcqW2RhdGEtZGlzYWJsZWQ9XCJkaXNhYmxlZFwiXScpO1xuXG4gICAgICBodHRwLm9ucmVhZHlzdGF0ZWNoYW5nZSA9ICgpID0+IHtcbiAgICAgICAgaWYgKGh0dHAucmVhZHlTdGF0ZSA9PT0gNCAmJiBodHRwLnN0YXR1cyA9PT0gMjAwKSB7XG4gICAgICAgICAgY29uc3QgcGFyc2VkUmVzcG9uc2UgPSBKU09OLnBhcnNlKGh0dHAucmVzcG9uc2VUZXh0KTtcbiAgICAgICAgICBoYW5kbGVyKHBhcnNlZFJlc3BvbnNlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKGh0dHAucmVhZHlTdGF0ZSA9PT0gNCAmJiBodHRwLnN0YXR1cyA9PT0gNTAwIHx8IGh0dHAuc3RhdHVzID09PSA0MDUpIHtcbiAgICAgICAgICB3aW5kb3cubm90aWZpY2F0aW9ucy5zaG93Tm90aWZpY2F0aW9uKCdlcnJvcicsICfQn9GA0L7QuNC30L7RiNC70LAg0L7RiNC40LHQutCwINGB0LXRgNCy0LXRgNCwLiDQn9C+0L/RgNC+0LHRg9C50YLQtSDQv9C+0LfQttC1LicpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYoaHR0cC5yZWFkeVN0YXRlID09PSA0ICYmIGh0dHAuc3RhdHVzID09PSA0MDMpIHtcbiAgICAgICAgICB3aW5kb3cubm90aWZpY2F0aW9ucy5zaG93Tm90aWZpY2F0aW9uKCdlcnJvcicsICfQn9GA0L7QuNC30L7RiNC70LAg0L7RiNC40LHQutCwINC00L7RgdGC0YPQv9CwLiDQn9C10YDQtdC30LDQv9GD0YHRgtC40YLQtSDRgdCw0LnRgi4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuZW5hYmxlU3VibWl0QnV0dG9uKGN1cnJlbnRTdWJtaXRCdXR0b24pO1xuICAgICAgfTtcblxuICAgICAgaHR0cC5vcGVuKG1ldGhvZCwgdXJsLCB0cnVlKTtcbiAgICAgIGh0dHAuc2VuZChib2R5KTtcbiAgICB9LFxuXG4gICAgc2V0Q3VzdG9tVmFyaWFibGVWYWx1ZTogKHByb3BlcnR5TmFtZSwgbmV3UHJvcGVydHlWYWx1ZSkgPT4ge1xuICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLnNldFByb3BlcnR5KHByb3BlcnR5TmFtZSwgbmV3UHJvcGVydHlWYWx1ZSk7XG4gICAgfSxcblxuICAgIGRvd25sb2FkRmlsZTogKGZpbGVQYXRoKSA9PiB7XG4gICAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuXG4gICAgICBlbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZSgnaHJlZicsIGZpbGVQYXRoKTtcbiAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdkb3dubG9hZCcsICdwZGYnKTtcbiAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCd0YXJnZXQnLCAnX2JsYW5rJyk7XG5cbiAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZWxlbWVudCk7XG5cbiAgICAgIGVsZW1lbnQuY2xpY2soKTtcblxuICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChlbGVtZW50KTtcbiAgICB9LFxuXG4gICAgcGFyc2VFcnJvcnM6IChlcnJvcnMpID0+IHtcbiAgICAgIE9iamVjdC5rZXlzKGVycm9ycykuZm9yRWFjaChlcnJvciA9PiB7XG4gICAgICAgIGNvbnN0IGludmFsaWRGaWVsZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCpbdHlwZT0nJHtlcnJvcn0nXWApO1xuICAgICAgICBjb25zdCBmaWVsZExhYmVsID0gaW52YWxpZEZpZWxkLnBhcmVudEVsZW1lbnQ7XG4gICAgICAgIGNvbnN0IGVycm9yQmxvY2sgPSBpbnZhbGlkRmllbGQubmV4dEVsZW1lbnRTaWJsaW5nO1xuXG4gICAgICAgIGVycm9yQmxvY2suaW5uZXJUZXh0ID0gZXJyb3JzW2Vycm9yXVswXS5tZXNzYWdlO1xuICAgICAgICBmaWVsZExhYmVsLmNsYXNzTGlzdC5hZGQoJ3VzZXItYWNjb3VudF9fbGFiZWwtLWVycm9yJyk7XG4gICAgICB9KTtcblxuICAgIH0sXG5cbiAgICBpc1Njcm9sbGVkSW50b1ZpZXc6IGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgICAgIGlmICh0YXJnZXQubGVmdCA9PT0gMCkgcmV0dXJuIG51bGw7XG5cbiAgICAgIGNvbnN0IHRhcmdldFBvc2l0aW9uID0ge1xuICAgICAgICB0b3A6IHdpbmRvdy5wYWdlWU9mZnNldCArIHRhcmdldC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3AsXG4gICAgICAgIGxlZnQ6IHdpbmRvdy5wYWdlWE9mZnNldCArIHRhcmdldC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0LFxuICAgICAgICByaWdodDogd2luZG93LnBhZ2VYT2Zmc2V0ICsgdGFyZ2V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnJpZ2h0LFxuICAgICAgICBib3R0b206IHdpbmRvdy5wYWdlWU9mZnNldCArIHRhcmdldC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5ib3R0b21cbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHdpbmRvd1Bvc2l0aW9uID0ge1xuICAgICAgICB0b3A6IHdpbmRvdy5wYWdlWU9mZnNldCxcbiAgICAgICAgbGVmdDogd2luZG93LnBhZ2VYT2Zmc2V0LFxuICAgICAgICByaWdodDogd2luZG93LnBhZ2VYT2Zmc2V0ICsgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoLFxuICAgICAgICBib3R0b206IHdpbmRvdy5wYWdlWU9mZnNldCArIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHRcbiAgICAgIH07XG5cbiAgICAgIGlmICh0YXJnZXRQb3NpdGlvbi5ib3R0b20gPiB3aW5kb3dQb3NpdGlvbi50b3AgJiZcbiAgICAgICAgKHRhcmdldFBvc2l0aW9uLnRvcCArIHRhcmdldC5jbGllbnRIZWlnaHQgKiAwLjUpIDwgd2luZG93UG9zaXRpb24uYm90dG9tKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBkaXNhYmxlU3VibWl0QnV0dG9uOiAoYnV0dG9uKSA9PiB7XG4gICAgICBidXR0b24uc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xuICAgICAgYnV0dG9uLnNldEF0dHJpYnV0ZSgnZGF0YS1kaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xuICAgICAgYnV0dG9uLmlubmVySFRNTCArPSBgPHN2ZyBjbGFzcz1cImJ0bl9fbG9hZGVyXCIgdmlld0JveD1cIjI1IDI1IDUwIDUwXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PGNpcmNsZSA8c3ZnIGNsYXNzPVwiYnRuX19sb2FkZXItY2lyY2xlXCIgY3g9XCI1MFwiIGN5PVwiNTBcIiByPVwiMjBcIj48L2NpcmNsZT48L3N2Zz5gO1xuICAgIH0sXG5cbiAgICBlbmFibGVTdWJtaXRCdXR0b246IChidXR0b24pID0+IHtcbiAgICAgIGlmIChidXR0b24gPT09IG51bGwpIHJldHVybjtcblxuICAgICAgaWYgKGJ1dHRvbi5oYXNBdHRyaWJ1dGUoJ2Rpc2FibGVkJykpIHtcbiAgICAgICAgYnV0dG9uLnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKTtcbiAgICAgICAgYnV0dG9uLnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS1kaXNhYmxlZCcpO1xuICAgICAgICBidXR0b24ucmVtb3ZlQ2hpbGQoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ0bl9fbG9hZGVyJykpO1xuICAgICAgfVxuICAgIH1cblxuICB9O1xufSkoKTsiXX0=

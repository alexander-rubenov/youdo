"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,i=new Array(e.length);t<e.length;t++)i[t]=e[t];return i}}!function(){axios.defaults.baseURL=window.location.origin,Vue.component("video-block",{delimiters:["[[","]]"],template:"#video-block",props:{service:Object,getServiceUrl:String,sendEcommerceData:Function,poster:String,videoLink:String},data:function(){return{timeoutID:null}},methods:{activateVideoPlayer:function(){var e=this.$refs.videoRef,t=setTimeout(function(){e.play()},1e3);this.timeoutID=t},deactivateVideoPlayer:function(){var e=this.$refs.videoRef;clearTimeout(this.timeoutID),e.pause(),e.currentTime=0,this.timeoutID=null},activateFullPlayer:function(){var e=document.getElementById("video-player-container"),t=document.getElementById("full-video-player");this.deactivateVideoPlayer(),e.classList.add("full-player-container--visible"),document.querySelector("body").classList.add("fixed"),t.src=this.$refs.videoRef.src,t.controls=!0;t.play()}}}),Vue.component("add-cart-button",{delimiters:["[[","]]"],template:"#add-cart-button",props:{label:Number,service:Object|String},methods:{}}),Vue.component("file-download-button",{delimiters:["[[","]]"],template:"#file-download-button",props:{label:String},methods:{downloadFile:function(e){!1===window.utils.isUserAuthenticated&&(e.preventDefault(),window.modals.openModalWindow(e),window.modals.downloadFile=this.$attrs.href[0][0])}}}),Vue.component("services-list-item",{delimiters:["[[","]]"],template:"#services-list-item",props:{service:Object,isServicesFetching:Boolean,pageName:String},computed:{getCoverImg:function(){return"background-image: linear-gradient(180deg, rgba(83, 27, 136, 0) 0%, rgba(83, 27, 136, 0.5) 100%), url('".concat(this.service.cover,"')")},getServiceUrl:function(){return"/".concat("Package"===this.service.object_type?"package":"service","/").concat(this.service.id)}},methods:{sendEcommerceData:function(){var e=this.service,t=e.name,i=e.id,o=e.price,r=e.tags,n=e.object_type;dataLayer.push({event:"productClick",ecommerce:{click:{actionField:{list:"".concat(this.pageName)},products:[{name:"".concat(t),id:"".concat(n.toLowerCase(),"-").concat(i),price:"".concat(o,".00"),category:r.map(function(e){return e.name}).join("|"),position:this.$attrs.index}]}}})}}}),Vue.component("slider",{delimiters:["[[","]]"],template:"#slider",props:{pageName:String},data:function(){return{servicesCollection:[]}},mounted:function(){var e=document.getElementById("full-video-player");Boolean(e)&&e.addEventListener("ended",this.deactivateFullPlayer)},created:function(){this.getServices()},computed:{getSliderId:function(){return this.$attrs["slider-id"]}},methods:{getServices:function(){var e=this,t=new FormData;t.append("csrfmiddlewaretoken",document.getElementById("csrfToken").value),axios.get(this.$attrs.url,t).then(function(t){var i,o,r=t.data;void 0!==r.packages&&void 0!==r.services?(i=e.servicesCollection).push.apply(i,_toConsumableArray(r.packages).concat(_toConsumableArray(r.services))):(o=e.servicesCollection).push.apply(o,_toConsumableArray(r));e.isServicesFetching=!1})},deactivateFullPlayer:function(e){var t=document.getElementById("video-player-container"),i=document.getElementById("full-video-player");e.target.classList.contains("full-player")&&"ended"!==e.type||(t.classList.remove("full-player-container--visible"),document.querySelector("body").classList.remove("fixed"),i.src="")}}}),Vue.component("services-list",{delimiters:["[[","]]"],template:"#services-list",props:{isWideLayout:Boolean,showAllServicesLink:Boolean,pageName:String},data:function(){return{servicesCollection:[],isServicesFetching:!0}},mounted:function(){var e=document.getElementById("full-video-player");Boolean(e)&&e.addEventListener("ended",this.deactivateFullPlayer)},created:function(){this.getServices()},methods:{getServices:function(){var e=this,t=new FormData;t.append("csrfmiddlewaretoken",document.getElementById("csrfToken").value),axios.get(this.$attrs.url,t).then(function(t){var i,o,r=t.data;void 0!==r.packages&&void 0!==r.services?(i=e.servicesCollection).push.apply(i,_toConsumableArray(r.packages).concat(_toConsumableArray(r.services))):(o=e.servicesCollection).push.apply(o,_toConsumableArray(r));e.isServicesFetching=!1})},deactivateFullPlayer:function(e){var t=document.getElementById("video-player-container"),i=document.getElementById("full-video-player");e.target.classList.contains("full-player")&&"ended"!==e.type||(t.classList.remove("full-player-container--visible"),document.querySelector("body").classList.remove("fixed"),i.src="")}}});new Vue({delimiters:["[[","]]"],el:"#service-root"})}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvc2VydmljZXMtbGlzdC5qcyJdLCJuYW1lcyI6WyJheGlvcyIsImRlZmF1bHRzIiwiYmFzZVVSTCIsIndpbmRvdyIsImxvY2F0aW9uIiwib3JpZ2luIiwiVnVlIiwiY29tcG9uZW50IiwiZGVsaW1pdGVycyIsInRlbXBsYXRlIiwicHJvcHMiLCJzZXJ2aWNlIiwiT2JqZWN0IiwiZ2V0U2VydmljZVVybCIsIlN0cmluZyIsInNlbmRFY29tbWVyY2VEYXRhIiwiRnVuY3Rpb24iLCJwb3N0ZXIiLCJ2aWRlb0xpbmsiLCJ2aWRlbyIsInRoaXMiLCIkcmVmcyIsInZpZGVvUmVmIiwidGltZW91dElEIiwic2V0VGltZW91dCIsInBsYXkiLCJtZXRob2RzIiwiZGVhY3RpdmF0ZVZpZGVvUGxheWVyIiwiY2xlYXJUaW1lb3V0IiwiYWN0aXZhdGVGdWxsUGxheWVyIiwicGxheWVyQ29udGFpbmVyIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInBsYXllciIsImNsYXNzTGlzdCIsImFkZCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250cm9scyIsInNyYyIsInBsYXlQcm9taXNlIiwibGFiZWwiLCJOdW1iZXIiLCJkb3dubG9hZEZpbGUiLCJldnQiLCJ1dGlscyIsImlzVXNlckF1dGhlbnRpY2F0ZWQiLCJwcmV2ZW50RGVmYXVsdCIsIm1vZGFscyIsIm9wZW5Nb2RhbFdpbmRvdyIsIiRhdHRycyIsImhyZWYiLCJwYWdlTmFtZSIsImNvbXB1dGVkIiwiZ2V0Q292ZXJJbWciLCJpc1NlcnZpY2VzRmV0Y2hpbmciLCJCb29sZWFuIiwiY292ZXIiLCJjb25jYXQiLCJuYW1lIiwiaWQiLCJ0YWdzIiwiX3RoaXMkc2VydmljZSIsImRhdGFMYXllciIsInB1c2giLCJwcmljZSIsIm9iamVjdF90eXBlIiwiZXZlbnQiLCJlY29tbWVyY2UiLCJjbGljayIsImFjdGlvbkZpZWxkIiwibGlzdCIsInByb2R1Y3RzIiwidG9Mb3dlckNhc2UiLCJjYXRlZ29yeSIsIm1hcCIsInRhZyIsImpvaW4iLCJwb3NpdGlvbiIsImluZGV4IiwiZGF0YSIsInNlcnZpY2VzQ29sbGVjdGlvbiIsIm1vdW50ZWQiLCJmdWxsVmlkZW9QbGF5ZXIiLCJhZGRFdmVudExpc3RlbmVyIiwiZGVhY3RpdmF0ZUZ1bGxQbGF5ZXIiLCJjcmVhdGVkIiwiZ2V0U2xpZGVySWQiLCJnZXRTZXJ2aWNlcyIsIl90aGlzIiwiZmV0Y2hEYXRhIiwiRm9ybURhdGEiLCJhcHBlbmQiLCJ2YWx1ZSIsImdldCIsInVybCIsInRoZW4iLCJfdGhpcyRzZXJ2aWNlc0NvbGxlY3QiLCJfdGhpcyRzZXJ2aWNlc0NvbGxlY3QyIiwiX3JlZiIsInVuZGVmaW5lZCIsInBhY2thZ2VzIiwic2VydmljZXMiLCJhcHBseSIsIl90b0NvbnN1bWFibGVBcnJheSIsInR5cGUiLCJjb250YWlucyIsInJlbW92ZSIsImlzV2lkZUxheW91dCIsInNob3dBbGxTZXJ2aWNlc0xpbmsiLCJfdGhpczIiLCJfcmVmMiIsIl90aGlzMiRzZXJ2aWNlc0NvbGxlYyIsIl90aGlzMiRzZXJ2aWNlc0NvbGxlYzIiLCJlbCJdLCJtYXBwaW5ncyI6IitkQUtBLFdBQ0VBLE1BQU1DLFNBQVNDLFFBQVVDLE9BQU9DLFNBQVNDLE9BRXpDQyxJQUFJQyxVQUFVLGNBQWUsQ0FDM0JDLFdBQVksQ0FBQyxLQUFNLE1BVHZCQyxTQUFBLGVBQ0FDLE1BQUEsQ0FDQUMsUUFBQUMsT0FDQUMsY0FBQUMsT0FFQ0Msa0JBQU1DLFNBQ0xoQixPQUFNQyxPQUVGTSxVQUFVTyxRQUVaTCxLQUFBQSxXQUNBQyxNQUFPLENBQ0xDLFVBQVNDLE9BR1RLLFFBQU0sQ0FDTkMsb0JBRE0sV0FQbUIsSUFBQUMsRUFBQUMsS0FBQUMsTUFBQUMsU0FXbEJDLEVBQUFDLFdBQUEsV0FDTUwsRUFBQU0sUUFEYixLQUlGQyxLQUFTSCxVQUFBQSxHQUtISSxzQkFiRSxXQWNILElBQUVSLEVBRkhDLEtBQUFDLE1BQUFDLFNBSktNLGFBQUFSLEtBQUFHLFdBWVBJLEVBQUFBLFFBQ0VSLEVBQU1B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ZSxHQUFZLElBRWdEQyxFQUM5REMsRUFISWpDLEVBQVUrQixFQUFWL0IsVUFFMERvQixJQUFBcEIsRUFBQXFCLGVBQUFELElBQUFwQixFQUFBc0IsVUFDOURVLEVBQUFGLEVBQUs3QixvQkFBbUJqQixLQUF4QnVDLE1BQUFTLEVBQUFSLG1CQUFnQ3hCLEVBQUtxQixVQUFyQzNDLE9BQUE4QyxtQkFBa0R4QixFQUFLc0IsYUFEekRXLEVBQUFILEVBRU83QixvQkFBQWpCLEtBRlB1QyxNQUFBVSxFQUFBVCxtQkFFT3hCLElBQ0w4QixFQUFBdkQsb0JBQUEsS0FJSDhCLHFCQWZMRyxTQUlFNUMsR0FMSyxJQUFBYixFQUFBQyxTQUFBQyxlQUFBLDBCQW1CUG9ELEVBQUFBLFNBbkJPcEQsZUFBQSxxQkFxQkNDLEVBQUFBLE9BQVNGLFVBQVNDLFNBQUFBLGdCQUF4QixVQUF1Q1csRUFBeEI2RCxPQUlmMUUsRUFBZ0JJLFVBQVV3RSxPQUFPLGtDQUNqQzNFLFNBQVNLLGNBQWMsUUFBUUYsVUFBVXdFLE9BQU8sU0FDaER6RSxFQUFPSyxJQUFNLFFBTUwsSUFBT2hDLElBRE8sQ0FFMUIyRyxXQUFJLENBQUEsS0FBQSxNQUZOQSxHQUFBLGtCQS9PRiIsImZpbGUiOiJjb21wb25lbnRzL3NlcnZpY2VzLWxpc3QubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gVE9ETzpcbi8vICAxKSB2aWRlby1wbGF5ZXItY29udGFpbmVyIG1ha2UgYXMgYSBzZXBhcmF0ZSBjb21wb25lbnQ7XG4vLyAgMikgc2VydmljZXMtbGlzdCBhbmQgc2xpZGVyIG1ldGhvZHMgbW91bnRlZCBhcmUgc2ltaWxhci4gTW92ZSBpdCB0byBzZXJ2aWNlUm9vdCBjb21wb25lbnQ7XG4vLyAgMykgZGVhY3RpdmF0ZUZ1bGxQbGF5ZXIgbWV0aG9kIHdhcyBkdXBsaWNhdGVkLCBtb3ZlIGl0IHRvIHNlcnZpY2VSb290IGNvbXBvbmVudDtcblxuKCgpID0+IHtcbiAgYXhpb3MuZGVmYXVsdHMuYmFzZVVSTCA9IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW47XG5cbiAgVnVlLmNvbXBvbmVudCgndmlkZW8tYmxvY2snLCB7XG4gICAgZGVsaW1pdGVyczogWydbWycsICddXSddLFxuICAgIHRlbXBsYXRlOiAnI3ZpZGVvLWJsb2NrJyxcbiAgICBwcm9wczoge1xuICAgICAgc2VydmljZTogT2JqZWN0LFxuICAgICAgZ2V0U2VydmljZVVybDogU3RyaW5nLFxuICAgICAgc2VuZEVjb21tZXJjZURhdGE6IEZ1bmN0aW9uLFxuICAgICAgcG9zdGVyOiBTdHJpbmcsXG4gICAgICB2aWRlb0xpbms6IFN0cmluZyxcbiAgICB9LFxuICAgIGRhdGE6ICgpID0+IHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHRpbWVvdXRJRDogbnVsbCxcbiAgICAgIH1cbiAgICB9LFxuICAgIG1ldGhvZHM6IHtcbiAgICAgIGFjdGl2YXRlVmlkZW9QbGF5ZXIoKSB7XG4gICAgICAgIGNvbnN0IHZpZGVvID0gdGhpcy4kcmVmcy52aWRlb1JlZjtcblxuICAgICAgICBjb25zdCB0aW1lb3V0SUQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICBjb25zdCBwbGF5UHJvbWlzZSA9IHZpZGVvLnBsYXkoKTtcbiAgICAgICAgfSwgMTAwMCk7XG5cbiAgICAgICAgdGhpcy50aW1lb3V0SUQgPSB0aW1lb3V0SUQ7XG5cbiAgICAgIH0sXG5cbiAgICAgIGRlYWN0aXZhdGVWaWRlb1BsYXllcigpIHtcbiAgICAgICAgY29uc3QgdmlkZW8gPSB0aGlzLiRyZWZzLnZpZGVvUmVmO1xuXG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVvdXRJRCk7XG4gICAgICAgIHZpZGVvLnBhdXNlKCk7XG4gICAgICAgIHZpZGVvLmN1cnJlbnRUaW1lID0gMDtcbiAgICAgICAgdGhpcy50aW1lb3V0SUQgPSBudWxsO1xuICAgICAgfSxcblxuICAgICAgYWN0aXZhdGVGdWxsUGxheWVyKCkge1xuICAgICAgICBjb25zdCBwbGF5ZXJDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndmlkZW8tcGxheWVyLWNvbnRhaW5lcicpO1xuICAgICAgICBjb25zdCBwbGF5ZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZnVsbC12aWRlby1wbGF5ZXInKTtcblxuICAgICAgICB0aGlzLmRlYWN0aXZhdGVWaWRlb1BsYXllcigpO1xuXG4gICAgICAgIHBsYXllckNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdmdWxsLXBsYXllci1jb250YWluZXItLXZpc2libGUnKTtcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpLmNsYXNzTGlzdC5hZGQoJ2ZpeGVkJyk7XG5cbiAgICAgICAgcGxheWVyLnNyYyA9IHRoaXMuJHJlZnMudmlkZW9SZWYuc3JjO1xuICAgICAgICBwbGF5ZXIuY29udHJvbHMgPSB0cnVlO1xuXG4gICAgICAgIGNvbnN0IHBsYXlQcm9taXNlID0gcGxheWVyLnBsYXkoKTtcbiAgICAgIH0sXG4gICAgfVxuICB9KTtcblxuICBWdWUuY29tcG9uZW50KCdhZGQtY2FydC1idXR0b24nLCB7XG4gICAgZGVsaW1pdGVyczogWydbWycsICddXSddLFxuICAgIHRlbXBsYXRlOiAnI2FkZC1jYXJ0LWJ1dHRvbicsXG4gICAgcHJvcHM6IHtcbiAgICAgIGxhYmVsOiBOdW1iZXIsXG4gICAgICBzZXJ2aWNlOiBPYmplY3QgfCBTdHJpbmcsXG4gICAgfSxcbiAgICBtZXRob2RzOiB7XG4gICAgfVxuICB9KTtcblxuICBWdWUuY29tcG9uZW50KCdmaWxlLWRvd25sb2FkLWJ1dHRvbicsIHtcbiAgICBkZWxpbWl0ZXJzOiBbJ1tbJywgJ11dJ10sXG4gICAgdGVtcGxhdGU6ICcjZmlsZS1kb3dubG9hZC1idXR0b24nLFxuICAgIHByb3BzOiB7XG4gICAgICBsYWJlbDogU3RyaW5nLFxuICAgIH0sXG4gICAgbWV0aG9kczoge1xuICAgICAgZG93bmxvYWRGaWxlKGV2dCkge1xuICAgICAgICBpZiAod2luZG93LnV0aWxzLmlzVXNlckF1dGhlbnRpY2F0ZWQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgd2luZG93Lm1vZGFscy5vcGVuTW9kYWxXaW5kb3coZXZ0KTtcbiAgICAgICAgICB3aW5kb3cubW9kYWxzLmRvd25sb2FkRmlsZSA9IHRoaXMuJGF0dHJzLmhyZWZbMF1bMF07XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgfVxuICB9KTtcblxuICBWdWUuY29tcG9uZW50KCdzZXJ2aWNlcy1saXN0LWl0ZW0nLCB7XG4gICAgZGVsaW1pdGVyczogWydbWycsICddXSddLFxuICAgIHRlbXBsYXRlOiAnI3NlcnZpY2VzLWxpc3QtaXRlbScsXG4gICAgcHJvcHM6IHtcbiAgICAgIHNlcnZpY2U6IE9iamVjdCxcbiAgICAgIGlzU2VydmljZXNGZXRjaGluZzogQm9vbGVhbixcbiAgICAgIHBhZ2VOYW1lOiBTdHJpbmcsXG4gICAgfSxcbiAgICBjb21wdXRlZDoge1xuICAgICAgZ2V0Q292ZXJJbWc6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGBiYWNrZ3JvdW5kLWltYWdlOiBsaW5lYXItZ3JhZGllbnQoMTgwZGVnLCByZ2JhKDgzLCAyNywgMTM2LCAwKSAwJSwgcmdiYSg4MywgMjcsIDEzNiwgMC41KSAxMDAlKSwgdXJsKCcke3RoaXMuc2VydmljZS5jb3Zlcn0nKWBcbiAgICAgIH0sXG4gICAgICBnZXRTZXJ2aWNlVXJsOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBgLyR7KHRoaXMuc2VydmljZS5vYmplY3RfdHlwZSA9PT0gJ1BhY2thZ2UnKSA/ICdwYWNrYWdlJyA6ICdzZXJ2aWNlJ30vJHt0aGlzLnNlcnZpY2UuaWR9YDtcbiAgICAgIH0sXG4gICAgfSxcbiAgICBtZXRob2RzOiB7XG4gICAgICBzZW5kRWNvbW1lcmNlRGF0YSgpIHtcbiAgICAgICAgY29uc3Qge25hbWUsIGlkLCBwcmljZSwgdGFncywgb2JqZWN0X3R5cGV9ID0gdGhpcy5zZXJ2aWNlO1xuXG4gICAgICAgIGRhdGFMYXllci5wdXNoKHtcbiAgICAgICAgICAnZXZlbnQnOiAncHJvZHVjdENsaWNrJyxcbiAgICAgICAgICAnZWNvbW1lcmNlJzoge1xuICAgICAgICAgICAgJ2NsaWNrJzoge1xuICAgICAgICAgICAgICAnYWN0aW9uRmllbGQnOiB7XG4gICAgICAgICAgICAgICAgJ2xpc3QnOiBgJHt0aGlzLnBhZ2VOYW1lfWAsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICdwcm9kdWN0cyc6IFt7XG4gICAgICAgICAgICAgICAgJ25hbWUnOiBgJHtuYW1lfWAsXG4gICAgICAgICAgICAgICAgJ2lkJzogYCR7b2JqZWN0X3R5cGUudG9Mb3dlckNhc2UoKX0tJHtpZH1gLFxuICAgICAgICAgICAgICAgICdwcmljZSc6IGAke3ByaWNlfS4wMGAsXG4gICAgICAgICAgICAgICAgJ2NhdGVnb3J5JzogdGFncy5tYXAodGFnID0+ICh0YWcubmFtZSkpLmpvaW4oJ3wnKSxcbiAgICAgICAgICAgICAgICAncG9zaXRpb24nOiB0aGlzLiRhdHRycy5pbmRleCxcbiAgICAgICAgICAgICAgfV1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICB9KTtcblxuICAgICAgfSxcbiAgICB9LFxuICB9KTtcblxuICBWdWUuY29tcG9uZW50KCdzbGlkZXInLCB7XG4gICAgZGVsaW1pdGVyczogWydbWycsICddXSddLFxuICAgIHRlbXBsYXRlOiAnI3NsaWRlcicsXG4gICAgcHJvcHM6IHtcbiAgICAgIHBhZ2VOYW1lOiBTdHJpbmcsXG4gICAgfSxcbiAgICBkYXRhOiAoKSA9PiB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzZXJ2aWNlc0NvbGxlY3Rpb246IFtdLFxuICAgICAgfVxuICAgIH0sXG4gICAgbW91bnRlZCgpIHtcbiAgICAgIGNvbnN0IGZ1bGxWaWRlb1BsYXllciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmdWxsLXZpZGVvLXBsYXllcicpO1xuXG4gICAgICBpZiAoQm9vbGVhbihmdWxsVmlkZW9QbGF5ZXIpKSB7XG4gICAgICAgIGZ1bGxWaWRlb1BsYXllci5hZGRFdmVudExpc3RlbmVyKCdlbmRlZCcsIHRoaXMuZGVhY3RpdmF0ZUZ1bGxQbGF5ZXIpO1xuICAgICAgfVxuICAgIH0sXG4gICAgY3JlYXRlZCgpIHtcbiAgICAgIHRoaXMuZ2V0U2VydmljZXMoKTtcbiAgICB9LFxuICAgIGNvbXB1dGVkOiB7XG4gICAgICBnZXRTbGlkZXJJZDogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4kYXR0cnNbJ3NsaWRlci1pZCddO1xuICAgICAgfSxcbiAgICB9LFxuICAgIG1ldGhvZHM6IHtcbiAgICAgIGdldFNlcnZpY2VzKCkge1xuICAgICAgICBjb25zdCBmZXRjaERhdGEgPSBuZXcgRm9ybURhdGEoKTtcbiAgICAgICAgZmV0Y2hEYXRhLmFwcGVuZCgnY3NyZm1pZGRsZXdhcmV0b2tlbicsIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjc3JmVG9rZW4nKS52YWx1ZSk7XG5cbiAgICAgICAgYXhpb3NcbiAgICAgICAgICAuZ2V0KHRoaXMuJGF0dHJzLnVybCwgZmV0Y2hEYXRhKVxuICAgICAgICAgIC50aGVuKCh7ZGF0YX0pID0+IHtcbiAgICAgICAgICAgIGlmIChkYXRhLnBhY2thZ2VzICE9PSB1bmRlZmluZWQgJiYgZGF0YS5zZXJ2aWNlcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgIHRoaXMuc2VydmljZXNDb2xsZWN0aW9uLnB1c2goLi4uZGF0YS5wYWNrYWdlcywgLi4uZGF0YS5zZXJ2aWNlcyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0aGlzLnNlcnZpY2VzQ29sbGVjdGlvbi5wdXNoKC4uLmRhdGEpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLmlzU2VydmljZXNGZXRjaGluZyA9IGZhbHNlO1xuICAgICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIGRlYWN0aXZhdGVGdWxsUGxheWVyKGV2dCkge1xuICAgICAgICBjb25zdCBwbGF5ZXJDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndmlkZW8tcGxheWVyLWNvbnRhaW5lcicpO1xuICAgICAgICBjb25zdCBwbGF5ZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZnVsbC12aWRlby1wbGF5ZXInKTtcblxuICAgICAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2Z1bGwtcGxheWVyJykgJiYgZXZ0LnR5cGUgIT09ICdlbmRlZCcpIHJldHVybjtcblxuICAgICAgICBwbGF5ZXJDb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgnZnVsbC1wbGF5ZXItY29udGFpbmVyLS12aXNpYmxlJyk7XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKS5jbGFzc0xpc3QucmVtb3ZlKCdmaXhlZCcpO1xuICAgICAgICBwbGF5ZXIuc3JjID0gJyc7XG4gICAgICB9LFxuICAgIH0sXG4gIH0pO1xuXG4gIFZ1ZS5jb21wb25lbnQoJ3NlcnZpY2VzLWxpc3QnLCB7XG4gICAgZGVsaW1pdGVyczogWydbWycsICddXSddLFxuICAgIHRlbXBsYXRlOiAnI3NlcnZpY2VzLWxpc3QnLFxuICAgIHByb3BzOiB7XG4gICAgICBpc1dpZGVMYXlvdXQ6IEJvb2xlYW4sXG4gICAgICBzaG93QWxsU2VydmljZXNMaW5rOiBCb29sZWFuLFxuICAgICAgcGFnZU5hbWU6IFN0cmluZyxcbiAgICB9LFxuICAgIGRhdGE6ICgpID0+IHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHNlcnZpY2VzQ29sbGVjdGlvbjogW10sXG4gICAgICAgIGlzU2VydmljZXNGZXRjaGluZzogdHJ1ZSxcbiAgICAgIH1cbiAgICB9LFxuICAgIG1vdW50ZWQoKSB7XG4gICAgICBjb25zdCBmdWxsVmlkZW9QbGF5ZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZnVsbC12aWRlby1wbGF5ZXInKTtcblxuICAgICAgaWYgKEJvb2xlYW4oZnVsbFZpZGVvUGxheWVyKSkge1xuICAgICAgICBmdWxsVmlkZW9QbGF5ZXIuYWRkRXZlbnRMaXN0ZW5lcignZW5kZWQnLCB0aGlzLmRlYWN0aXZhdGVGdWxsUGxheWVyKTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgY3JlYXRlZCgpIHtcbiAgICAgIHRoaXMuZ2V0U2VydmljZXMoKTtcbiAgICB9LFxuICAgIG1ldGhvZHM6IHtcbiAgICAgIGdldFNlcnZpY2VzKCkge1xuICAgICAgICBjb25zdCBmZXRjaERhdGEgPSBuZXcgRm9ybURhdGEoKTtcbiAgICAgICAgZmV0Y2hEYXRhLmFwcGVuZCgnY3NyZm1pZGRsZXdhcmV0b2tlbicsIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjc3JmVG9rZW4nKS52YWx1ZSk7XG5cbiAgICAgICAgYXhpb3NcbiAgICAgICAgICAuZ2V0KHRoaXMuJGF0dHJzLnVybCwgZmV0Y2hEYXRhKVxuICAgICAgICAgIC50aGVuKCh7ZGF0YX0pID0+IHtcblxuICAgICAgICAgICAgaWYgKGRhdGEucGFja2FnZXMgIT09IHVuZGVmaW5lZCAmJiBkYXRhLnNlcnZpY2VzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgdGhpcy5zZXJ2aWNlc0NvbGxlY3Rpb24ucHVzaCguLi5kYXRhLnBhY2thZ2VzLCAuLi5kYXRhLnNlcnZpY2VzKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHRoaXMuc2VydmljZXNDb2xsZWN0aW9uLnB1c2goLi4uZGF0YSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuaXNTZXJ2aWNlc0ZldGNoaW5nID0gZmFsc2U7XG4gICAgICAgICAgfSk7XG4gICAgICB9LFxuXG4gICAgICBkZWFjdGl2YXRlRnVsbFBsYXllcihldnQpIHtcbiAgICAgICAgY29uc3QgcGxheWVyQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZpZGVvLXBsYXllci1jb250YWluZXInKTtcbiAgICAgICAgY29uc3QgcGxheWVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Z1bGwtdmlkZW8tcGxheWVyJyk7XG5cbiAgICAgICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdmdWxsLXBsYXllcicpICYmIGV2dC50eXBlICE9PSAnZW5kZWQnKSByZXR1cm47XG5cbiAgICAgICAgcGxheWVyQ29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoJ2Z1bGwtcGxheWVyLWNvbnRhaW5lci0tdmlzaWJsZScpO1xuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5JykuY2xhc3NMaXN0LnJlbW92ZSgnZml4ZWQnKTtcbiAgICAgICAgcGxheWVyLnNyYyA9ICcnO1xuICAgICAgfVxuICAgIH0sXG4gIH0pO1xuXG4gIGNvbnN0IHNlcnZpY2VSb290ID0gbmV3IFZ1ZSh7XG4gICAgZGVsaW1pdGVyczogWydbWycsICddXSddLFxuICAgIGVsOiAnI3NlcnZpY2Utcm9vdCcsXG4gIH0pO1xuXG59KSgpOyJdfQ==
